{"id":"code-1","title":"Phase 0: Set up crate structure and library root","description":"Create the module structure as defined in ARCHITECTURE.md:\n- src/lib.rs with crate-level #![forbid(unsafe_code)]\n- Module declarations for cli, config, rules, engine, output\n- Empty mod.rs files for each module (per STYLE_GUIDE: use non-mod-rs layout)\n- Add base dependencies to Cargo.toml (thiserror, serde)\n\nDefinition of Done:\n- cargo check passes\n- cargo fmt --check passes  \n- cargo clippy passes\n- Module structure matches ARCHITECTURE.md","status":"done","priority":0,"issue_type":"task","created_at":"2026-01-12T03:58:52.233576883Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:10:02.840672554Z","labels":["phase-0-foundation"]}
{"id":"code-10","title":"Phase 3: Define Rule trait and Violation struct","description":"Create src/rules/rule.rs:\n- Rule trait with methods: id(), description(), languages(), severity(), execute()\n- ExecutionContext struct (file_path, content, optional AST reference)\n- Violation struct with: rule_id, file, line, column, end_line, end_column, snippet, message, region\n\nThe Rule trait must be Send + Sync for parallel execution.\n\nDepends on: code-9\n\nDefinition of Done:\n- Rule trait is defined and documented\n- Violation struct captures all fields needed for output\n- Types are properly bounded for thread safety\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:12.564936045Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:12.564936045Z","labels":["phase-3-rules"],"dependencies":[{"issue_id":"code-10","depends_on_id":"code-9","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-11","title":"Phase 3: Implement RegexRule","description":"Create src/rules/regex_rule.rs:\n- RegexRule struct implementing Rule trait\n- Parse regex patterns from rule definition TOML\n- Execute regex against file content using regex crate\n- Convert match positions to line/column using precomputed line offsets\n- Extract snippet around match\n\nUse regex crate. Consider RegexSet for multi-pattern matching if needed.\n\nDepends on: code-10\n\nDefinition of Done:\n- RegexRule can be constructed from TOML definition\n- Matches are found with correct positions\n- Snippets are extracted properly\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:18.563777714Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:18.563777714Z","labels":["phase-3-rules"],"dependencies":[{"issue_id":"code-11","depends_on_id":"code-10","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-12","title":"Phase 3: Implement RuleRegistry","description":"Create src/rules/registry.rs:\n- RuleRegistry struct to hold all enabled rules\n- Load rules from: built-in definitions, custom ratchets/regex/, custom ratchets/ast/\n- Parse rule definition TOML format from builtin-ratchets/\n- Filter rules by enabled status in config\n- Provide get_rule(id) and iter_rules() methods\n\nDepends on: code-11\n\nDefinition of Done:\n- Can load built-in regex rules from builtin-ratchets/regex/\n- Can load custom rules from ratchets/ directory\n- Filters based on config.rules settings\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:25.013315176Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:25.013315176Z","labels":["phase-3-rules"],"dependencies":[{"issue_id":"code-12","depends_on_id":"code-11","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-13","title":"Phase 3: Test regex rules","description":"Create tests for regex rule execution:\n- Unit tests for regex pattern matching\n- Tests for line/column position calculation\n- Tests for multi-line patterns\n- Tests for case-insensitive matching\n- Tests for snippet extraction\n- Integration tests with no-todo-comments and no-fixme-comments rules\n\nDepends on: code-12\n\nDefinition of Done:\n- Regex rules find correct matches in test files\n- Positions are accurate\n- cargo nextest run passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:30.129079261Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:30.129079261Z","labels":["phase-3-rules","testing"],"dependencies":[{"issue_id":"code-13","depends_on_id":"code-12","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-14","title":"Phase 4: Add tree-sitter dependencies and parser loading","description":"Create src/rules/ast/parser_cache.rs:\n- Add tree-sitter and language grammar crates to Cargo.toml as optional features\n- ParserCache struct for lazy grammar loading\n- get_parser(Language) -\u003e Result\u003c\u0026Parser\u003e\n- Cache parsed parsers to avoid reloading\n\nLanguages to support (v1): Rust, TypeScript, JavaScript, Python, Go\nUse feature flags to make grammars optional.\n\nDepends on: code-13\n\nDefinition of Done:\n- tree-sitter crate compiles\n- Can load parser for each supported language\n- Parsers are cached after first load\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:43.859620462Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:43.859620462Z","labels":["phase-4-ast"],"dependencies":[{"issue_id":"code-14","depends_on_id":"code-13","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-15","title":"Phase 4: Implement AstRule for tree-sitter queries","description":"Create src/rules/ast_rule.rs:\n- AstRule struct implementing Rule trait\n- Parse tree-sitter query syntax from rule definition TOML\n- Execute query against parsed AST\n- Extract match positions from query captures\n- Handle @violation capture for reporting location\n\nQuery format follows tree-sitter S-expression syntax as shown in DESIGN.md.\n\nDepends on: code-14\n\nDefinition of Done:\n- AstRule can be constructed from TOML definition\n- Queries execute against parsed trees\n- Match positions are correctly extracted\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:49.379160131Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:49.379160131Z","labels":["phase-4-ast"],"dependencies":[{"issue_id":"code-15","depends_on_id":"code-14","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-16","title":"Phase 4: Integrate AST rules into RuleRegistry","description":"Update src/rules/registry.rs:\n- Load AST rules from builtin-ratchets/ast/{language}/\n- Load custom AST rules from ratchets/ast/\n- Differentiate regex vs AST rules during loading\n- Validate tree-sitter query syntax on load\n\nDepends on: code-15\n\nDefinition of Done:\n- Registry loads both regex and AST rules\n- Built-in AST rules (no-unwrap, no-expect, no-panic) are loadable\n- Invalid queries produce clear error messages\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:55.040490009Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:55.040490009Z","labels":["phase-4-ast"],"dependencies":[{"issue_id":"code-16","depends_on_id":"code-15","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-17","title":"Phase 4: Test AST rules with tree-sitter","description":"Create tests for AST rule execution:\n- Unit tests for tree-sitter query execution\n- Tests for Rust no-unwrap, no-expect, no-panic rules\n- Tests for TypeScript no-any rule\n- Tests for Python no-bare-except rule\n- Tests verifying correct position extraction\n- Tests for query validation errors\n\nCreate test fixtures in tests/fixtures/ast_rules/\n\nDepends on: code-16\n\nDefinition of Done:\n- AST rules correctly find violations in test code\n- Positions match expected locations\n- All built-in AST rules have test coverage\n- cargo nextest run passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:01:00.720350262Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:00.720350262Z","labels":["phase-4-ast","testing"],"dependencies":[{"issue_id":"code-17","depends_on_id":"code-16","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-18","title":"Phase 5: Implement parallel execution engine with rayon","description":"Create src/engine/executor.rs:\n- ExecutionEngine struct coordinating all components\n- Parallel file processing using rayon\n- Parallel rule execution across files\n- AST caching: parse once, share across rules\n- Collect violations from all rules\n\nExecution flow from ARCHITECTURE.md:\n1. Discover files\n2. Parse ASTs in parallel (for AST rules)\n3. Execute rules in parallel\n4. Collect violations\n\nDepends on: code-17\n\nDefinition of Done:\n- Engine executes all enabled rules\n- Uses rayon for parallelism\n- ASTs are parsed once and reused\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:13.045210628Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:13.045210628Z","labels":["phase-5-engine"],"dependencies":[{"issue_id":"code-18","depends_on_id":"code-17","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-19","title":"Phase 5: Implement violation aggregation by region","description":"Create src/engine/aggregator.rs:\n- ViolationAggregator struct\n- Group violations by (rule_id, region_path)\n- Compute violation counts per rule/region\n- Compare against budgets from CountsManager\n- Determine pass/fail status per rule/region\n\nRegion assignment: map file path to its containing region based on counts file.\n\nDepends on: code-18\n\nDefinition of Done:\n- Violations are correctly grouped by region\n- Count comparison with budgets works\n- Pass/fail status is correctly determined\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:19.000453881Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:19.000453881Z","labels":["phase-5-engine"],"dependencies":[{"issue_id":"code-19","depends_on_id":"code-18","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-2","title":"Phase 0: Define core error types with thiserror","description":"Create src/error.rs with RatchetError enum:\n- ConfigError variant for configuration issues\n- RuleError variant for rule parsing/validation errors\n- ParseError variant for source file parse errors (includes file path)\n- IoError variant (wrap std::io::Error)\n\nFollow the error types from ARCHITECTURE.md. Use thiserror for derive macros.\n\nDepends on: code-1 (crate structure)\n\nDefinition of Done:\n- RatchetError enum is defined with all variants\n- Implements std::error::Error via thiserror\n- cargo check passes\n- cargo clippy passes","status":"done","priority":0,"issue_type":"task","created_at":"2026-01-12T03:59:02.899449346Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:12:26.373171426Z","labels":["phase-0-foundation"],"dependencies":[{"issue_id":"code-2","depends_on_id":"code-1","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-20","title":"Phase 5: Test execution engine","description":"Create tests for execution engine:\n- Unit tests for parallel execution\n- Tests for AST caching behavior\n- Tests for violation aggregation\n- Tests for region assignment\n- Tests for budget comparison\n- Integration test with multiple rules and files\n\nDepends on: code-19\n\nDefinition of Done:\n- Engine correctly executes rules in parallel\n- Aggregation groups violations properly\n- Budget comparisons are accurate\n- cargo nextest run passes within 120s timeout","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:24.333062759Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:24.333062759Z","labels":["phase-5-engine","testing"],"dependencies":[{"issue_id":"code-20","depends_on_id":"code-19","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-21","title":"Phase 6: Implement CLI argument parsing with clap","description":"Create src/cli/args.rs:\n- Use clap derive macros for argument parsing\n- Define subcommands: check, init, bump, tighten, list, merge-driver\n- Common options: --format (human|jsonl), --color (auto|always|never)\n- check: optional paths, --format\n- init: --force flag\n- bump: rule-id, --region, --count\n- tighten: optional rule-id, --region\n- list: --format\n- merge-driver: positional args for %O %A %B\n\nDepends on: code-20\n\nDefinition of Done:\n- All subcommands parse correctly\n- Help text is clear and complete\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:37.416199459Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:37.416199459Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-21","depends_on_id":"code-20","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-22","title":"Phase 6: Implement 'ratchet init' command","description":"Create src/cli/init.rs:\n- Create ratchet.toml with sensible defaults\n- Create empty ratchet-counts.toml\n- Create ratchets/regex/ and ratchets/ast/ directories\n- Skip existing files unless --force\n- Idempotent: safe to run multiple times\n\nDepends on: code-21\n\nDefinition of Done:\n- Init creates all required files\n- --force overwrites existing files\n- Without --force, existing files are preserved\n- Exit code 0 on success, 2 on error\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:43.117859295Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:43.117859295Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-22","depends_on_id":"code-21","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-23","title":"Phase 6: Implement 'ratchet check' command","description":"Create src/cli/check.rs:\n- Load config and counts\n- Build rule registry\n- Run execution engine\n- Format output (human or JSONL)\n- Return appropriate exit code (0=pass, 1=exceeded, 2=error, 3=parse error)\n\nThis is the primary command that ties everything together.\n\nDepends on: code-22\n\nDefinition of Done:\n- Check runs all enabled rules\n- Output format respects --format flag\n- Exit codes match DESIGN.md specification\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:50.197103298Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:50.197103298Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-23","depends_on_id":"code-22","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-24","title":"Phase 6: Implement 'ratchet bump' command","description":"Create src/cli/bump.rs:\n- Parse rule-id, --region, --count arguments\n- If --count provided: set budget to that value\n- If --count omitted: run check for that rule/region, use current count\n- Update ratchet-counts.toml\n- Fail if new count is lower than current violations (suggest tighten)\n\nDepends on: code-23\n\nDefinition of Done:\n- Bump updates counts file correctly\n- Auto-detect works when --count omitted\n- Error if trying to bump below current violations\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:01:56.496729676Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:01:56.496729676Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-24","depends_on_id":"code-23","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-25","title":"Phase 6: Implement 'ratchet tighten' command","description":"Create src/cli/tighten.rs:\n- Run check to get current violation counts\n- For each rule/region: if current \u003c budget, reduce budget to current\n- Fail if any current \u003e budget (violations exceed budget)\n- Update ratchet-counts.toml\n- Support filtering by rule-id and --region\n\nDepends on: code-24\n\nDefinition of Done:\n- Tighten reduces budgets to current counts\n- Fails if violations exceed budget\n- Optional filtering by rule/region works\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:02.783316596Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:02.783316596Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-25","depends_on_id":"code-24","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-26","title":"Phase 6: Implement 'ratchet list' command","description":"Create src/cli/list.rs:\n- List all enabled rules with their status\n- Show: rule ID, source (built-in/custom), languages, current count, budget, status\n- Support --format human|jsonl\n\nDepends on: code-25\n\nDefinition of Done:\n- Lists all enabled rules\n- Shows accurate current counts and budgets\n- Both output formats work\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:07.992282876Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:07.992282876Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-26","depends_on_id":"code-25","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-27","title":"Phase 6: Implement 'ratchet merge-driver' command","description":"Create src/cli/merge_driver.rs:\n- Accept three positional arguments: base (%O), ours (%A), theirs (%B)\n- Parse all three TOML files\n- Build unified set of all rule/region keys\n- For each key: result = min(ours, theirs)\n- Write merged result to ours file (%A)\n- Exit 0 on success, non-zero on parse failure\n\nThis enables conflict-free merges of ratchet-counts.toml.\n\nDepends on: code-26\n\nDefinition of Done:\n- Merge driver correctly takes minimum counts\n- Handles missing keys (use default/inherit)\n- Writes valid TOML output\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:14.964938087Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:14.964938087Z","labels":["phase-6-cli"],"dependencies":[{"issue_id":"code-27","depends_on_id":"code-26","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-28","title":"Phase 6: Test CLI commands","description":"Create tests for all CLI commands:\n- Integration tests for init (creates files, --force behavior)\n- Integration tests for check (exit codes, output)\n- Integration tests for bump (updates counts, auto-detect)\n- Integration tests for tighten (reduces counts, fails on exceeded)\n- Integration tests for list (output formats)\n- Integration tests for merge-driver (minimum wins)\n\nUse assert_cmd or similar for CLI testing.\n\nDepends on: code-27\n\nDefinition of Done:\n- All commands have test coverage\n- Exit codes are verified\n- Output formats are verified\n- cargo nextest run passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:20.990333674Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:20.990333674Z","labels":["phase-6-cli","testing"],"dependencies":[{"issue_id":"code-28","depends_on_id":"code-27","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-29","title":"Phase 7: Implement human-readable output formatter","description":"Create src/output/human.rs:\n- HumanFormatter struct\n- Colorized output using termcolor (when TTY or --color=always)\n- Group violations by rule, then by region\n- Show violation locations with snippets\n- Use symbols: ✓ for pass, ✗ for fail\n- Summary line at end\n\nOutput format should match example in DESIGN.md.\n\nDepends on: code-28\n\nDefinition of Done:\n- Output matches DESIGN.md format\n- Colors work on supported terminals\n- --color flag is respected\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:32.211114012Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:32.211114012Z","labels":["phase-7-output"],"dependencies":[{"issue_id":"code-29","depends_on_id":"code-28","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-3","title":"Phase 0: Define Language enum and core domain types","description":"Create src/types.rs with:\n- Language enum (Rust, TypeScript, JavaScript, Python, Go)\n- RuleId newtype (wrapping String with validation)\n- RegionPath newtype (normalized path handling)\n- Severity enum (Error, Warning, Info)\n- GlobPattern wrapper type\n\nThese are the foundational domain types used throughout the codebase.\n\nDepends on: code-2\n\nDefinition of Done:\n- All types are defined with appropriate derives (Debug, Clone, PartialEq, Eq, Hash as needed)\n- Types are re-exported from lib.rs\n- cargo check passes\n- cargo clippy passes","status":"done","priority":0,"issue_type":"task","created_at":"2026-01-12T03:59:09.36557946Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:18:41.268953211Z","labels":["phase-0-foundation"],"dependencies":[{"issue_id":"code-3","depends_on_id":"code-2","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-30","title":"Phase 7: Implement JSONL output formatter","description":"Create src/output/jsonl.rs:\n- JsonlFormatter struct\n- Three record types: violation, summary, status\n- One JSON object per line\n- Deterministic ordering (sorted by rule, file, line)\n- Include all fields from DESIGN.md schema\n\nRecord schemas from DESIGN.md:\n- violation: type, rule, file, line, column, end_line, end_column, snippet, message, region\n- summary: type, rule, region, violations, budget, status  \n- status: type, passed, rules_checked, rules_exceeded, total_violations\n\nDepends on: code-29\n\nDefinition of Done:\n- All record types are output correctly\n- JSON is valid and parseable\n- Output is deterministically sorted\n- cargo check/fmt/clippy pass","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:38.559741043Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:38.559741043Z","labels":["phase-7-output"],"dependencies":[{"issue_id":"code-30","depends_on_id":"code-29","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-31","title":"Phase 7: Test output formatters","description":"Create tests for output formatters:\n- Unit tests for human formatter output\n- Unit tests for JSONL formatter output\n- Tests for color handling (auto/always/never)\n- Tests for deterministic ordering in JSONL\n- Tests for special characters in file paths/snippets\n- Snapshot tests for expected output formats\n\nDepends on: code-30\n\nDefinition of Done:\n- Both formatters produce correct output\n- JSONL is valid JSON\n- Deterministic output is verified\n- cargo nextest run passes","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-12T04:02:43.88481417Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:43.88481417Z","labels":["phase-7-output","testing"],"dependencies":[{"issue_id":"code-31","depends_on_id":"code-30","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-32","title":"Phase 8: End-to-end integration tests","description":"Create comprehensive end-to-end tests in tests/:\n- Test full workflow: init -\u003e add violations -\u003e check -\u003e tighten\n- Test with real multi-file projects\n- Test with mixed regex and AST rules\n- Test region inheritance across directory structure\n- Test gitignore interaction\n- Test all exit codes in realistic scenarios\n\nCreate test fixture projects in tests/fixtures/projects/\n\nDepends on: code-31\n\nDefinition of Done:\n- E2E tests cover happy path and error cases\n- Tests complete within 120s timeout\n- Tests are deterministic\n- cargo nextest run passes","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T04:02:56.809303301Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:02:56.809303301Z","labels":["phase-8-integration","testing"],"dependencies":[{"issue_id":"code-32","depends_on_id":"code-31","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-33","title":"Phase 8: Load built-in rules from compiled resources","description":"Implement loading of built-in rules:\n- Embed builtin-ratchets/ into binary using include_str! or rust-embed\n- Load at runtime without external file dependencies\n- Maintain ability to override with custom rules in ratchets/\n- Ensure all built-in rules from builtin-ratchets/ are available\n\nDepends on: code-32\n\nDefinition of Done:\n- Built-in rules work without external files\n- Binary is self-contained\n- Custom rules can still override built-in\n- cargo check/fmt/clippy pass","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T04:03:03.219652179Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:03:03.219652179Z","labels":["phase-8-integration"],"dependencies":[{"issue_id":"code-33","depends_on_id":"code-32","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-34","title":"Phase 8: Performance testing and optimization","description":"Create performance benchmarks and optimize:\n- Benchmark rule execution on large codebases\n- Profile with flamegraph to identify bottlenecks\n- Verify parallel execution is effective\n- Test with 1000+ files to ensure scalability\n- Document performance characteristics\n\nFocus areas:\n- File I/O parallelism\n- AST parsing caching effectiveness\n- Regex compilation caching\n\nDepends on: code-33\n\nDefinition of Done:\n- Benchmarks exist for key operations\n- Performance is acceptable for large codebases\n- No obvious bottlenecks remain\n- cargo nextest run completes within 120s","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T04:03:12.261043294Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:03:12.261043294Z","labels":["phase-8-integration"],"dependencies":[{"issue_id":"code-34","depends_on_id":"code-33","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-35","title":"Phase 8: Final polish and documentation review","description":"Final review and polish tasks:\n- Verify all exit codes match DESIGN.md\n- Review error messages for clarity\n- Ensure all public APIs are documented\n- Verify README.md examples work\n- Run cargo doc and fix any warnings\n- Final cargo fmt/clippy/nextest pass\n\nDepends on: code-34\n\nDefinition of Done:\n- All documentation is accurate\n- Examples in README work\n- No clippy warnings\n- All tests pass\n- Ready for release","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-12T04:03:17.80037313Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:03:17.80037313Z","labels":["phase-8-integration"],"dependencies":[{"issue_id":"code-35","depends_on_id":"code-34","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-4","title":"Phase 0: Test foundation infrastructure","description":"Add tests for foundation types:\n- Unit tests for error type conversions and display\n- Unit tests for Language enum serialization/deserialization\n- Unit tests for RuleId validation\n- Unit tests for RegionPath normalization\n\nCreate tests/foundation_tests.rs for integration tests.\n\nDepends on: code-3\n\nDefinition of Done:\n- All unit tests pass\n- cargo nextest run passes\n- cargo fmt --check passes\n- cargo clippy passes","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-12T03:59:14.532705754Z","created_by":"Danver Braganza","updated_at":"2026-01-12T03:59:14.532705754Z","labels":["phase-0-foundation","testing"],"dependencies":[{"issue_id":"code-4","depends_on_id":"code-3","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-5","title":"Phase 1: Implement ratchet.toml parsing with serde","description":"Create src/config/ratchet_toml.rs:\n- Config struct matching DESIGN.md schema\n- RuleConfig for rule enable/disable/options\n- OutputConfig for format settings\n- Serde deserialization from TOML\n- Validation: check version field, valid language names, valid glob patterns\n\nUse toml crate for parsing.\n\nDepends on: code-4\n\nDefinition of Done:\n- Config struct can deserialize valid ratchet.toml examples from DESIGN.md\n- Invalid configs produce clear error messages\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T03:59:30.305604845Z","created_by":"Danver Braganza","updated_at":"2026-01-12T03:59:30.305604845Z","labels":["phase-1-config"],"dependencies":[{"issue_id":"code-5","depends_on_id":"code-4","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-6","title":"Phase 1: Implement ratchet-counts.toml parsing","description":"Create src/config/counts.rs:\n- CountsManager struct\n- RegionTree for hierarchical count storage  \n- Parse [rule-id] sections with region path keys\n- get_budget(rule_id, file_path) -\u003e u64 with inheritance logic\n- Mutation methods for bump/tighten: set_count, reduce_to_current\n- Serialize back to TOML preserving formatting where possible\n\nFollow the inheritance semantics from DESIGN.md:\n- Root '.' defaults to 0\n- Child regions inherit from nearest parent override\n\nDepends on: code-5\n\nDefinition of Done:\n- Can parse example ratchet-counts.toml from DESIGN.md\n- Inheritance resolution works correctly\n- Can serialize modified counts back\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T03:59:38.257198209Z","created_by":"Danver Braganza","updated_at":"2026-01-12T03:59:38.257198209Z","labels":["phase-1-config"],"dependencies":[{"issue_id":"code-6","depends_on_id":"code-5","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-7","title":"Phase 1: Test configuration parsing","description":"Create comprehensive tests for config module:\n- Unit tests for ratchet.toml parsing (valid cases)\n- Unit tests for ratchet.toml validation errors\n- Unit tests for counts.toml parsing\n- Unit tests for region inheritance resolution\n- Integration tests with fixture files in tests/fixtures/config/\n\nDepends on: code-6\n\nDefinition of Done:\n- All config parsing edge cases covered\n- Inheritance tests verify parent-\u003echild budget resolution\n- cargo nextest run passes\n- cargo fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T03:59:44.138808712Z","created_by":"Danver Braganza","updated_at":"2026-01-12T03:59:44.138808712Z","labels":["phase-1-config","testing"],"dependencies":[{"issue_id":"code-7","depends_on_id":"code-6","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-8","title":"Phase 2: Implement file walker with ignore crate","description":"Create src/engine/file_walker.rs:\n- FileWalker struct using ignore crate for gitignore-aware traversal\n- Filter by include/exclude glob patterns from config\n- Determine Language from file extension\n- Return Iterator\u003cItem = FileEntry\u003e with path and detected language\n- Parallel file discovery using ignore's parallel walker\n\nKey requirements:\n- Respect .gitignore automatically\n- Apply config include/exclude patterns on top\n- Map extensions to Language enum\n\nDepends on: code-7\n\nDefinition of Done:\n- Can walk a directory respecting gitignore\n- Include/exclude patterns filter correctly\n- Language detection works for supported extensions\n- cargo check/fmt/clippy pass","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T03:59:56.329421801Z","created_by":"Danver Braganza","updated_at":"2026-01-12T03:59:56.329421801Z","labels":["phase-2-filesystem"],"dependencies":[{"issue_id":"code-8","depends_on_id":"code-7","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
{"id":"code-9","title":"Phase 2: Test file walker","description":"Create tests for file walking:\n- Unit tests for language detection from extensions\n- Integration tests with test directory structures\n- Tests verifying gitignore is respected\n- Tests for include/exclude pattern filtering\n- Tests for symlink handling\n\nCreate test fixtures in tests/fixtures/file_walker/\n\nDepends on: code-8\n\nDefinition of Done:\n- File walker correctly handles nested directories\n- Gitignore patterns are respected\n- Include/exclude patterns work as expected\n- cargo nextest run passes","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-12T04:00:01.349847554Z","created_by":"Danver Braganza","updated_at":"2026-01-12T04:00:01.349847554Z","labels":["phase-2-filesystem","testing"],"dependencies":[{"issue_id":"code-9","depends_on_id":"code-8","type":"blocks","created_at":"0001-01-01T00:00:00Z"}]}
